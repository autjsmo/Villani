:root{
  --bg:#f2f6fb;
  --card:#ffffff;
  --primary:#1a73e8;
  --primary-soft:#e3f0ff;
  --text:#1c1c1c;
  --muted:#8a8a8a;
  --danger:#e53935;
  --border:#dde3ee;
  --radius-card:18px;
  --radius-pill:999px;
  --shadow-soft:0 4px 12px rgba(0,0,0,0.06);
  --font-system:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,sans-serif;
}

*,
*::before,
*::after{ box-sizing:border-box; }

html,body{
  margin:0; padding:0; height:100%;
  font-family:var(--font-system);
  background:var(--bg); color:var(--text);
}

body{ display:flex; flex-direction:column; }

/* HEADER */
.app-header{
  padding:8px 12px 10px; display:flex; align-items:center; justify-content:space-between;
  background:#fff; box-shadow:0 1px 4px rgba(0,0,0,0.08);
}
.header-circle{ width:38px; height:38px; border-radius:50%; border:none; background:var(--primary-soft); color:var(--primary); font-size:20px; display:flex; align-items:center; justify-content:center; }
.header-circle.hidden{ visibility:hidden; }
.header-center{ text-align:center; flex:1; }
.header-right-placeholder{ width:38px; height:38px; }
.app-header h1{ margin:0; font-size:20px; font-weight:700; color:var(--primary); }
.subtitle{ font-size:12px; color:var(--muted); }
.subtitle-small{ font-size:11px; color:var(--muted); margin-top:2px; }

/* MAIN */
main{ flex:1; padding:10px 10px 70px; max-width:700px; margin:0 auto; width:100%; }
.view{ display:block; }
.view.hidden{ display:none; }
.view-title{ font-size:16px; font-weight:600; margin-bottom:10px; color:var(--primary); }
.card{ background:var(--card); border-radius:var(--radius-card); box-shadow:var(--shadow-soft); padding:8px 0; }
.card-flat{ margin-top:8px; border-radius:18px; }

/* LISTA */
.list{ display:flex; flex-direction:column; }
.project-item{ padding:10px 16px; display:flex; align-items:center; border-bottom:1px solid var(--border); gap:8px; }
.project-item:last-child{ border-bottom:none; }
.project-bar{ width:3px; height:40px; border-radius:3px; background:var(--primary); margin-right:10px; }
.project-main{ flex:1; display:flex; flex-direction:column; }
.project-name{ font-size:15px; font-weight:500; }
.project-meta{ font-size:11px; color:var(--muted); margin-top:2px; }
.project-delete-btn{ width:28px; height:28px; border-radius:50%; border:none; background:#ffe5e5; color:var(--danger); font-size:20px; display:flex; align-items:center; justify-content:center; }

/* DETTAGLIO */
.detail-header{ margin-top:10px; padding:0 4px; }
.detail-main h2{ margin:0; font-size:18px; }
.detail-subtitle{ font-size:11px; color:var(--muted); }

/* ACCORDION */
.accordion{ border-radius:18px; overflow:hidden; }
.acc-item{ border-bottom:1px solid var(--border); }
.acc-item:last-child{ border-bottom:none; }
.acc-toggle{ width:100%; padding:14px 16px; background:#fff; border:none; display:flex; align-items:center; justify-content:space-between; font-size:15px; }
.acc-label{ color:var(--primary); font-weight:600; }
.chevron{ font-size:14px; color:var(--muted); }
.acc-body{ padding:8px 12px 12px; background:#f9fbff; display:none; opacity:0; transition:opacity 0.20s ease; }
.acc-body.open{ display:block; opacity:1; }

/* SEZIONI */
.frutti-section-title{ font-size:13px; font-weight:600; color:var(--muted); text-transform:uppercase; letter-spacing:0.04em; margin:4px 4px 2px; }

/* Derivazioni header */
.deriv-header{ display:flex; align-items:center; justify-content:space-between; margin:4px 0 2px; }
.deriv-header-title{ font-size:14px; font-weight:600; color:var(--muted); }
.deriv-header-btn{ border:none; background:#eef4ff; color:var(--primary); border-radius:50%; width:24px; height:24px; display:flex; align-items:center; justify-content:center; font-size:18px; }
/* Spazio extra tra titolo sezione e header derivazioni/partitore */
.frutti-section-title + .deriv-header{ margin-top:10px; }
/* Spazio extra sopra il blocco Aspiratore */
.aspiratore-header{ margin-top:12px; }

/* RIGHE */
.frutto-row{ padding:6px 4px; display:flex; align-items:center; }
.frutto-name{ flex:1; font-size:14px; }
.counter{ display:flex; align-items:center; gap:4px; }
.counter-btn{ width:32px; height:32px; border-radius:8px; border:1px solid var(--primary); background:#fff; color:var(--primary); font-size:20px; display:flex; align-items:center; justify-content:center; }
.counter-btn.minus.zero{ border-color:var(--danger) !important; color:var(--danger) !important; background:#ffe5e5 !important; }
.counter-btn.force-red{ border-color:var(--danger) !important; color:var(--danger) !important; background:#ffe5e5 !important; }
.counter-value{ width:40px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:600; font-size:14px; }
.counter-value.zero{ background:#e0e3eb; color:#7b7f8a; }
.counter-value.nonzero{ background:var(--primary); color:#fff; }
.add-fruit-btn{ margin-top:4px; padding:6px 10px; border-radius:12px; border:1px dashed var(--primary); background:#eef4ff; color:var(--primary); font-size:13px; display:inline-flex; align-items:center; gap:4px; }
.add-fruit-btn .plus{ font-size:18px; }

/* FAB */
.fab{ position:fixed; right:18px; bottom:22px; width:56px; height:56px; border-radius:50%; border:none; background:var(--primary); color:#fff; font-size:30px; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 14px rgba(0,0,0,0.25); }
.fab.hidden{ display:none; }

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:20px;
}
.modal.hidden{ display:none !important; }
.modal-card{
  width:100%;
  max-width:360px;
  background:#fff;
  border-radius:16px;
  padding:24px 20px 20px;
  max-height:90vh;
  overflow:auto;
  box-shadow:0 12px 40px rgba(0,0,0,0.3);
}
.modal-card h3{ margin:0 0 16px; font-size:18px; font-weight:600; }

/* Input solo per text */
.modal-card input[type="text"]{
  width:100%;
  padding:14px 16px;
  border-radius:12px;
  border:2px solid var(--primary);
  font-size:16px;
  outline:none;
}
.modal-card input[type="text"]:focus{
  border-color:#f1b835;
}

/* Partitore: radio in alto, simmetrico */
.modal-card h3 {
  text-align: left;
  margin: 0 0 12px;
}
.part-options{
  margin: 0 0 10px;
  display:flex;
  justify-content:space-around;
  gap:24px;
  width:100%;
}
.part-option{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:15px;
}
.part-option input[type="radio"]{
  appearance: radio;
  -webkit-appearance: radio;
  width:18px;
  height:18px;
  margin:0;
  accent-color: var(--primary);
}
.part-option span{
  font-size:15px;
  color:var(--text);
}

/* Spinner centrato e simmetrico */
.deriv-spinner{
  width:100%;
  max-width:260px;
  margin:14px auto 10px;
  display:flex;
  align-items:center;
  justify-content:space-around;
  gap:16px;
}

.modal-actions{
  margin-top:20px; display:flex; justify-content:flex-end; gap:12px;
}
.btn{
  border-radius:var(--radius-pill);
  padding:10px 22px;
  border:none;
  font-size:15px;
  font-weight:500;
  cursor:pointer;
}
.btn.primary{ background:var(--primary); color:#fff; }
.btn.secondary{ background:#f0f0f0; color:#555; }

/* Spinner derivazione */
.deriv-value{ font-size:42px; font-weight:700; color:var(--primary); min-width:60px; text-align:center; }
.deriv-arrow{
  width:48px; height:48px; border-radius:50%; border:none;
  background:var(--primary-soft); color:var(--primary);
  font-size:28px; display:flex; align-items:center; justify-content:center; cursor:pointer;
}
.deriv-arrow:active{ background:var(--primary); color:#fff; }

/* Aspiratore modal */
.aspir-row{
  display:flex; align-items:center; gap:10px; margin:8px 0 14px;
  font-size:15px; color:var(--text);
}
.aspir-row input[type="checkbox"]{
  width:18px; height:18px; accent-color:var(--primary);
}
.aspir-input{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:2px solid var(--primary);
  font-size:15px;
  outline:none;
}
.aspir-input:focus{
  border-color:#f1b835;
}
